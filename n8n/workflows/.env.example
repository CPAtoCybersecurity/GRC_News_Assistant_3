################################################################################
# n8n Hardened Configuration - Environment Variables
#
# INSTRUCTIONS:
# 1. Copy this file to .env: cp .env.example .env
# 2. Generate secure passwords for each *_PASSWORD variable
# 3. Generate encryption key: openssl rand -hex 16
# 4. NEVER commit .env to version control
#
# Password generation commands:
#   openssl rand -base64 32          # For passwords
#   openssl rand -hex 16             # For encryption key (must be 32 chars)
#   uuidgen | tr -d '-'              # Alternative for encryption key
################################################################################

#===============================================================================
# n8n Version (pin for stability, or use 'latest')
#===============================================================================
N8N_VERSION=latest

#===============================================================================
# PostgreSQL Database
#===============================================================================
POSTGRES_USER=n8n
POSTGRES_PASSWORD=CHANGE_ME_generate_with_openssl_rand_base64_32
POSTGRES_DB=n8n

#===============================================================================
# Redis Cache
#===============================================================================
REDIS_PASSWORD=CHANGE_ME_generate_with_openssl_rand_base64_32

#===============================================================================
# n8n Core Configuration
#===============================================================================
# Host/URL Configuration
N8N_HOST=localhost
N8N_PORT=5678
N8N_PROTOCOL=http
WEBHOOK_URL=http://localhost:5678/

# CRITICAL: Generate with: openssl rand -hex 16
# This encrypts credentials stored in the database
N8N_ENCRYPTION_KEY=CHANGE_ME_must_be_32_hex_chars

#===============================================================================
# Authentication
#===============================================================================
# Basic auth (for development/personal use)
# For production, use a reverse proxy with OAuth/OIDC instead
N8N_BASIC_AUTH_ACTIVE=true
N8N_BASIC_AUTH_USER=admin
N8N_BASIC_AUTH_PASSWORD=CHANGE_ME_generate_with_openssl_rand_base64_32

#===============================================================================
# Logging & Monitoring
#===============================================================================
N8N_LOG_LEVEL=info
N8N_METRICS_PREFIX=n8n_

#===============================================================================
# Security Settings
#===============================================================================
# Max payload size in MB (prevents DoS via large payloads)
N8N_PAYLOAD_SIZE_MAX=16

# Disable template gallery (reduces attack surface)
N8N_TEMPLATES_ENABLED=false

#===============================================================================
# Optional: API Keys for Workflows
# Add your own API keys here - they'll be available as environment variables
# in n8n. Prefer using n8n's built-in credential storage instead.
#===============================================================================
# ANTHROPIC_API_KEY=sk-ant-...
# OPENAI_API_KEY=sk-...
# NOTION_API_KEY=secret_...
